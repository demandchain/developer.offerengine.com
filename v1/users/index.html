<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=1020, maximum-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />

  <link rel="icon" type="image/x-icon" href="http://media.deem.com/designimages/deemsmb_favicon.ico" />
  <link rel="shortcut icon" type="image/x-icon" href="http://media.deem.com/designimages/deemsmb_favicon.ico" />

  <title>Users - OfferEngine API</title>

  <link href="/shared/css/documentation.css" rel="stylesheet" />
  <link href="/shared/css/pygments.css" rel="stylesheet" />
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.0/css/font-awesome.css">

  <!--[if lt IE 9]> <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
  <!--[if lte IE 9]> <link href="//netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome-ie7.css" rel="stylesheet" /> <![endif]-->
</head>
<body class="api">

<div id="wrapper">
  <header class="row">
    <div class="centered clearfix">
      <h1>
        <a href="http://www.deem.com/developer/"><img src="/shared/images/deem_developers.png" alt="Deem Developers" /></a>
      </h1>
      <nav>
        <ul>
          <li><a href="http://www.deem.com/developer/">Home</a></li>
          <li><a href="/" class="active">Documentation</a></li>
          <li><a href="mailto:support@deem.com">Support</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <article class="row">
    <header class="row">
      <div class="centered clearfix">
        <h1>Deem Offers  API Documentation</h1>
      </div>
    </header>

    <div class="centered clearfix">
      <nav id="side-menu" class="col3">
        <h1>Introduction</h1>
        <ul>
          <li><a href="/">Overview</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/authentication/">Authentication</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/errors/">Errors</a><span class="icon-arrow-right"></span></li>
        </ul>

        <h1>Getting Started</h1>
        <ul>
          <li><a href="/v1/quick_start/">Quick Start</a><span class="icon-arrow-right"></span></li>
        </ul>

        <h1>Core Calls</h1>
        <ul>
          <li><a href="/v1/get_deals/">Get Deals</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/full_purchase/">Execute Purchases</a><span class="icon-arrow-right"></span></li>
        </ul>

        <h1>Additional Calls</h1>
        <ul>
          <li><a href="/v1/adunits/">Ad Units</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/deals/">Deals</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/purchases/">Purchases</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/regions/">Regions</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/regions/deals/">Region Deals</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/">Users</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/access_tokens/">User Access Tokens</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/card_links/">User Card Links</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/coupons/">User Coupons</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/credit_cards/">User Credit Cards</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/purchases/">User Purchases</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/saved_deals/">User Saved Deals</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/shipping_addresses/">User Shipping Addresses</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/users/subscriptions/">User Subscriptions</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/targeted_emails/batches/">Targeted Emails</a><span class="icon-arrow-right"></span></li>
          <li><a href="/v1/stats/merchants/">Stats</a><span class="icon-arrow-right"></span></li>
        </ul>

        <h1>Reseller Calls</h1>
        <ul>
          <li><a href="/v3/resellers/purchases/">Purchases</a><span class="icon-arrow-right"></span></li>
        </ul>
      </nav>

      <div class="content col9">
        <h1 id="users">Users</h1>

<ul>
<li><a href="/v1/users/#get-a-user">Get a user</a></li>
  <li><a href="/v1/users/#create-a-user">Create a user</a></li>
  <li><a href="/v1/users/#update-a-user">Update a user</a></li>
  <li><a href="/v1/users/#update-a-user-by-email">Update a user by email</a></li>
</ul><p>Many of the resources on the users API provide a shortcut for getting
information about the currently authenticated user. If a request URL
does not include a <code>:user</code> parameter than the response will be for the
user infered from an access token.</p>

<h2 id="get-a-user">Get a user</h2>

<pre><code>GET /users/:user_id
</code></pre>

<h3 id="response">Response</h3>

<pre class="headers"><code>Status: 200 OK</code></pre>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"success"</span><span class="p">,</span>
  <span class="s2">"user"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"ABC123"</span><span class="p">,</span>
    <span class="s2">"firstname"</span><span class="o">:</span> <span class="s2">"deal"</span><span class="p">,</span>
    <span class="s2">"lastname"</span><span class="o">:</span> <span class="s2">"seeker"</span><span class="p">,</span>
    <span class="s2">"image_url"</span><span class="o">:</span> <span class="s2">"http://graph.facebook.com/508354830/picture?type=large"</span><span class="p">,</span>
    <span class="s2">"points"</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"token"</span><span class="o">:</span> <span class="s2">"partner_provided"</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>

<h2 id="create-a-user">Create a user</h2>

<pre><code>POST /users
</code></pre>

<h3 id="parameters">Parameters</h3>

<dl>
<dt>email</dt>
  <dd><em>String</em></dd>
  <dt>source</dt>
  <dd>
    <ul>
<li>
<em>String</em> used for reporting</li>
      <li>only valid with <em>api_token</em>
</li>
    </ul>
</dd>
  <dt>token</dt>
  <dd>
    <ul>
<li>
<em>String</em> partner token</li>
      <li>only valid with <em>api_token</em>
</li>
    </ul>
</dd>
  <dt>first_name</dt>
  <dd><em>String</em></dd>
  <dt>last_name</dt>
  <dd><em>String</em></dd>
  <dt>birthday</dt>
  <dd><em>String</em></dd>
  <dt>postal_code</dt>
  <dd><em>String</em></dd>
  <dt>credits</dt>
  <dd>
<em>Integer</em> Amount of credits in cents. If this value is not provided, the default new user signup credit will be assigned.</dd>
  <dt>partner_data</dt>
  <dd>
<em>Hash</em> Store data about a user.  Be careful to not overwrite this value.</dd>
  <dt>session_id (optional)</dt>
  <dd>
<em>STRING</em> If specified, the action will find the affiliate information from the session and remember the user is created through the affiliate</dd>
</dl><h3 id="response-1">Response</h3>

<pre class="headers"><code>Status: 200 OK</code></pre>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"success"</span><span class="p">,</span>
  <span class="s2">"user_id"</span><span class="o">:</span> <span class="s2">"abc123"</span>
<span class="p">}</span></code></pre>

<h2 id="update-a-user">Update a user</h2>

<pre><code>PUT /users/:user_id
</code></pre>

<h3 id="parameters-1">Parameters</h3>

<dl>
<dt>email</dt>
  <dd><em>String</em></dd>
  <dt>source</dt>
  <dd>
    <ul>
<li>
<em>String</em> used for reporting</li>
      <li>only valid with <em>api_token</em>
</li>
    </ul>
</dd>
  <dt>token</dt>
  <dd>
    <ul>
<li>
<em>String</em> partner token</li>
      <li>only valid with <em>api_token</em>
</li>
    </ul>
</dd>
  <dt>first_name</dt>
  <dd><em>String</em></dd>
  <dt>last_name</dt>
  <dd><em>String</em></dd>
  <dt>birthday</dt>
  <dd><em>String</em></dd>
  <dt>postal_code</dt>
  <dd><em>String</em></dd>
  <dt>pass</dt>
  <dd>
<em>String</em> Password, must be at least 5 characters long. If updating this value, pass_confirmation must also be
provided.</dd>
  <dt>pass_confirmation</dt>
  <dd>
<em>String</em> Same as pass</dd>
  <dt>partner_data</dt>
  <dd>
<em>Hash</em> Store data about a user.  Be careful to not overwrite this value.</dd>
  <dt>is_deleted</dt>
  <dd>
<em>Boolean</em> The soft delete status of a user.</dd>
</dl><h3 id="response-2">Response</h3>

<pre class="headers"><code>Status: 200 OK</code></pre>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"success"</span><span class="p">,</span>
  <span class="s2">"user"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"ABC123"</span><span class="p">,</span>
    <span class="s2">"firstname"</span><span class="o">:</span> <span class="s2">"deal"</span><span class="p">,</span>
    <span class="s2">"lastname"</span><span class="o">:</span> <span class="s2">"seeker"</span><span class="p">,</span>
    <span class="s2">"image_url"</span><span class="o">:</span> <span class="s2">"http://graph.facebook.com/508354830/picture?type=large"</span><span class="p">,</span>
    <span class="s2">"points"</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"token"</span><span class="o">:</span> <span class="s2">"partner_provided"</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>

<h2 id="update-a-user-by-email">Update a user by email</h2>
<p>This particular resource can be accessed with an optional request parameter</p>

<p>Without the optional parameter the request will look like this</p>

<pre><code>PUT /api/v1/users/:user@email_address.com/update_by_email
</code></pre>

<p>With the optional parameter the request will look like this</p>

<pre><code>PUT /api/v1/users/:user@email_address.com/update_by_email?overwrite_token=true
</code></pre>

<p>The ramifications of this are as follows:-</p>

<ul>
<li>
    <p>assuming the user pre-exists in the offer engine</p>

    <ul>
<li>
        <p>if a token is included in the request but it has not changed  <br>
then no further action is required</p>
      </li>
      <li>
        <p>if a token is included in the request and there was not a token previously  <br>
then no further action is required</p>
      </li>
      <li>
        <p>if a token is included in the request but it has changed  <br>
then the overwrite_token = true option must be included:    </p>
        <ul>
<li>this will instruct the api to update the users token with the new value,  <br>
failure to include the option will result in a 422 error</li>
        </ul>
</li>
    </ul>
</li>
  <li>
    <p>assuming the user does not exist yet in the offer engine</p>

    <ul>
<li>this resource can still be PUT to,   <br>
resulting in the user being created in the offer engine:  <br>
The overwrite token is not required in this scenario   </li>
    </ul>
</li>
</ul><h3 id="parameters-2">Parameters</h3>

<dl>
<dt>source</dt>
  <dd>
    <ul>
<li>
<em>String</em> used for reporting</li>
      <li>only valid with <em>api_token</em>
</li>
    </ul>
</dd>
  <dt>token</dt>
  <dd>
    <ul>
<li>
<em>String</em> partner token</li>
      <li>only valid with <em>api_token</em>
</li>
      <li>see note above: optional overwrite_token=true might be required on the request</li>
    </ul>
</dd>
  <dt>first_name</dt>
  <dd><em>String</em></dd>
  <dt>last_name</dt>
  <dd><em>String</em></dd>
  <dt>birthday</dt>
  <dd><em>String</em></dd>
  <dt>postal_code</dt>
  <dd><em>String</em></dd>
  <dt>partner_data</dt>
  <dd>
<em>Hash</em> Store data about a user.  Be careful to not overwrite this value.</dd>
  <dt>is_deleted</dt>
  <dd>
<em>Boolean</em> The soft delete status of a user.</dd>
</dl><h3 id="response-3">Response</h3>

<pre class="headers"><code>Status: 200 OK</code></pre>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"success"</span><span class="p">,</span>
  <span class="s2">"user"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"ABC123"</span><span class="p">,</span>
    <span class="s2">"firstname"</span><span class="o">:</span> <span class="s2">"deal"</span><span class="p">,</span>
    <span class="s2">"lastname"</span><span class="o">:</span> <span class="s2">"seeker"</span><span class="p">,</span>
    <span class="s2">"image_url"</span><span class="o">:</span> <span class="s2">"http://graph.facebook.com/508354830/picture?type=large"</span><span class="p">,</span>
    <span class="s2">"points"</span><span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"token"</span><span class="o">:</span> <span class="s2">"partner_provided"</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>

<ul>
<li>if the token has changed for an existing user and the overwrite_token=true option  <br>
was not included on the request then the reponse will be</li>
</ul><pre class="headers"><code>Status: 422 Unprocessable Entity</code></pre>

<pre class="highlight"><code class="language-javascript"><span class="p">{</span>
  <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"error"</span><span class="p">,</span>
  <span class="s2">"error_type"</span><span class="o">:</span> <span class="s2">"update_failed"</span><span class="p">,</span>
  <span class="s2">"error_msg"</span><span class="o">:</span> <span class="s2">"Unable to update, partner token has changed"</span>
<span class="p">}</span></code></pre>
      </div>

    </div>

  </article>
</div>


<footer class="row">
  <div class="centered">
      <nav>
        <ul class="left">
          <li><a href="http://www.deem.com/"><img src="http://media.deem.com/designimages/deem_logo.png" alt="Deem" width="59" height="18"></a></li>
          <li><a href="http://www.deem.com/work">Save</a></li>
          <li><a href="http://www.deem.com/merchant">Sell</a></li>
          <li><a href="http://www.deem.com/" target="_blank">Partner</a></li>
          <li><a href="http://blog.deem.com/">Discover</a></li>
          <li><a href="http://www.deem.com/developer">Develop</a></li>
        </ul>

        <ul class="right">
          <li><a href="http://www.deem.com/" target="_blank">About Us</a></li>
          <li><a href="http://www.deem.com/privacy/terms.html" target="_blank">Terms</a></li>
          <li><a href="http://www.deem.com/privacy/global-privacy-statement.html" target="_blank">Privacy</a></li>
          <li><a href="mailto:needhelp@deem">Feedback</a></li>
        </ul>
      </nav>
      <p>&copy; 1999-2013 Rearden Commerce, Inc. All rights reserved.</p>
    </div>
</footer>

<script src="/shared/js/jquery.js"></script>
<script src="/shared/js/documentation.js"></script>
<script src="https://tealium.hs.llnwd.net/o43/utag/rearden/main/prod/utag.js"></script>
</body>
</html>
